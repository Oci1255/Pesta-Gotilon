<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polling Lomba Menggambar dan Mewarnai Pesta Gotilon 2025</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #7f0a0a, #ff7300);
            color: white;
            margin: 0;
            padding: 0;
        }
        header {
            text-align: center;
            padding: 20px;
            font-size: 24px;
            background-color: #530404;
        }
        main {
            display: flex;
            justify-content: space-between;
            padding: 20px;
        }
        .column {
            width: 48%;
            background: rgba(255, 115, 0, 0.1);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        h2 {
            text-align: center;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input[type="text"], input[type="password"], select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: none;
            border-radius: 5px;
        }
        button {
            background-color: #ff7300;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }
        button:hover {
            background-color: #e65d00;
        }
        .results {
            margin-top: 20px;
        }
        .token-list {
            max-height: 100px;
            overflow-y: auto;
            background: rgba(255, 115, 0, 0.2);
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <header>Polling Lomba Menggambar dan Mewarnai Pesta Gotilon 2025</header>
    <main>
        <div class="column" id="voting-column">
            <h2>Polling Responden</h2>
            <label for="token">Masukkan Token:</label>
            <input type="text" id="token" placeholder="Token Anda">
            <button id="submit-token">Submit Token</button>
            <div id="voting-options" style="display:none;">
                <h3>Pilih Lomba:</h3>
                <label><input type="radio" name="competition" value="Mewarnai"> Mewarnai</label>
                <label><input type="radio" name="competition" value="Menggambar"> Menggambar</label>
                <h3>Pilih Sektor:</h3>
                <label><input type="radio" name="sector" value="Sektor 1"> Sektor 1</label>
                <label><input type="radio" name="sector" value="Sektor 2"> Sektor 2</label>
                <label><input type="radio" name="sector" value="Sektor 3"> Sektor 3</label>
                <label><input type="radio" name="sector" value="Sektor 4"> Sektor 4</label>
                <label><input type="radio" name="sector" value="Sektor 5"> Sektor 5</label>
                <label><input type="radio" name="sector" value="Sektor 6"> Sektor 6</label>
                <label><input type="radio" name="sector" value="Sektor 7"> Sektor 7</label>
                <button id="vote-button" style="display:none;">Vote</button>
            </div>
        </div>
        <div class="column" id="admin-column">
            <h2>Panel Admin</h2>
            <label for="admin-password">Masukkan Password:</label>
            <input type="password" id="admin-password" placeholder="Password Admin">
            <button id="admin-login">Login</button>
            <div id="admin-options" style="display:none;">
                <h3>Hasil Polling</h3>
                <div class="results" id="results"></div>
                <h3>Token</h3>
                <div class="token-list" id="token-list"></div>
                <button id="generate-token">Generate Token</button>
                <button id="admin-logout">Logout</button>
            </div>
        </div>
    </main>
    <script>
        const ADMIN_PASSWORD = "semutsektor32025";
        let tokens = {};
        let votes = {
            Mewarnai: { "Sektor 1": 0, "Sektor 2": 0, "Sektor 3": 0, "Sektor 4": 0, "Sektor 5": 0, "Sektor 6": 0, "Sektor 7": 0 },
            Menggambar: { "Sektor 1": 0, "Sektor 2": 0, "Sektor 3": 0, "Sektor 4": 0, "Sektor 5": 0, "Sektor 6": 0, "Sektor 7": 0 }
        };

        document.getElementById('submit-token').addEventListener('click', () => {
            const tokenInput = document.getElementById('token').value.trim();
            if (tokens[tokenInput] === undefined) {
                alert("Token tidak valid.");
                return;
            }
            if (tokens[tokenInput]) {
                alert("Token sudah digunakan.");
                return;
            }
            tokens[tokenInput] = true; // Mark token as used
            document.getElementById('voting-options').style.display = 'block';
            document.getElementById('token').disabled = true;
            document.getElementById('submit-token').disabled = true;
        });

        document.getElementById('vote-button').addEventListener('click', () => {
            const competition = document.querySelector('input[name="competition"]:checked');
            const sector = document.querySelector('input[name="sector"]:checked');
            if (competition && sector) {
                votes[competition.value][sector.value]++;
                alert("Terima kasih telah memberikan suara!");
                document.getElementById('voting-options').style.display = 'none';
                document.getElementById('token').disabled = false;
                document.getElementById('submit-token').disabled = false;
                document.getElementById('token').value = '';
            }
        });

        document.getElementById('admin-login').addEventListener('click', () => {
            const password = document.getElementById('admin-password').value;
            if (password === ADMIN_PASSWORD) {
                document.getElementById('admin-options').style.display = 'block';
                document.getElementById('admin-password').disabled = true;
                document.getElementById('admin-login').disabled = true;
                renderResults();
                renderTokenList();
            } else {
                alert("Password salah.");
            }
        });

        document.getElementById('generate-token').addEventListener('click', () => {
            const newToken = Math.random().toString(36).substring(2, 10).toUpperCase();
            tokens[newToken] = false; // Token is unused
            renderTokenList();
            alert("Token baru dibuat: " + newToken);
        });

        document.getElementById('admin-logout').addEventListener('click', () => {
            document.getElementById('admin-options').style.display = 'none';
            document.getElementById('admin-password').disabled = false;
            document.getElementById('admin-login').disabled = false;
            document.getElementById('admin-password').value = '';
        });

        function renderResults() {
            let resultHtml = "<ul>";
            for (const [competition, sectors] of Object.entries(votes)) {
                resultHtml += `<li>${competition}: `;
                for (const [sector, count] of Object.entries(sectors)) {
                    resultHtml += `${sector}: ${count}, `;
                }
                resultHtml += "</li>";
            }
            resultHtml += "</ul>";
            document.getElementById('results').innerHTML = resultHtml;
        }

        function renderTokenList() {
            let tokenHtml = "<ul>";
            for (const [token, used] of Object.entries(tokens)) {
                tokenHtml += `<li>${token} - ${used ? "Sudah digunakan" : "Belum digunakan"}</li>`;
            }
            tokenHtml += "</ul>";
            document.getElementById('token-list').innerHTML = tokenHtml;
        }
    </script>
</body>
</html>
